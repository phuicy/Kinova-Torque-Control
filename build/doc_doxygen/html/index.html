<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kinova Unilateral: Kinova-Unilaterals</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Kinova Unilateral
   </div>
   <div id="projectbrief">Unilateral haptic control of Kinova gen3</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Kinova-Unilaterals </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
Robots Supported</h1>
<ul>
<li>Kinova Gen3 Ultra 7DOF<ul>
<li>API - 2.09 +</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Unilateral</h1>
<p>Will test the robot in torque mode, with Compensation and PD control.</p>
<p>The program will initially connect to the robot. Then, clear faults on the robot and request the robot to home. The robot will then go into low-level torque mode with a PD controller holding the home position in 1kHz torque mode.</p>
<p>With compensation: \(u = (u+C(p,\dot{p}) +G(p))\), where, \(p\) is position and \(\dot{p}\) is velocity of the robot joints. (N.b. \f are there for doxygen rendering of math mode, but breaks markdown rendering mathmode).</p>
<p>There is a topic that can set the demand position and velocity, overwriting the starting home position. This allows for position control, for velocity control you need to feed in current position as well.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Shared Features</h1>
<h2><a class="anchor" id="autotoc_md4"></a>
Pause</h2>
<p>Each robot has a hold position controller, triggered by a ROS parameter.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
PD Tuning</h2>
<p>Each robot can be live tuned for PD k parameters via ROS parameters</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Compensation</h2>
<p>Both gravity and coriolis compensaiton can be turned off and on by ROS parameter for each robot.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Build</h1>
<h2><a class="anchor" id="autotoc_md8"></a>
Dependencies</h2>
<ul>
<li>ROS2 foxy - for logging</li>
<li>conan for kinova</li>
<li>build-essentials</li>
</ul>
<h2><a class="anchor" id="autotoc_md9"></a>
Optional dependencies</h2>
<ul>
<li>Doxygen</li>
<li>LaTeX - for lateX doxygen docs</li>
</ul>
<h2><a class="anchor" id="autotoc_md10"></a>
Standard build</h2>
<div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake .. -DCMAKE_INSTALL_PREFIX=/usr</div>
<div class="line">make -j$(nproc)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md11"></a>
Build AppImage</h2>
<div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake .. -DCMAKE_INSTALL_PREFIX=/usr</div>
<div class="line"> </div>
<div class="line"># build project and install files into AppDir</div>
<div class="line"> </div>
<div class="line">make -j$(nproc)</div>
<div class="line"> </div>
<div class="line">make install DESTDIR=AppDir</div>
<div class="line"> </div>
<div class="line">linuxdeploy-x86_64.AppImage --appdir AppDir -o appimage -d ../desktop/unilateral_mock.desktop -i ../desktop/logo.png -l /opt/ros/foxy/lib/librmw_fastrtps_cpp.so -l /opt/ros/foxy/lib/librmw_dds_common__rosidl_typesupport_fastrtps_cpp.so -l /opt/ros/foxy/lib/librcl_interfaces__rosidl_typesupport_fastrtps_c.so -l /opt/ros/foxy/lib/librcl_interfaces__rosidl_typesupport_fastrtps_cpp.so -l /opt/ros/foxy/lib/libsensor_msgs__rosidl_typesupport_fastrtps_cpp.so </div>
</div><!-- fragment --><div class="fragment"><div class="line">linuxdeploy-x86_64.AppImage --appdir AppDir -o appimage -d ../desktop/unilateral.desktop -i ../desktop/logo.png -l /opt/ros/foxy/lib/librmw_fastrtps_cpp.so -l /opt/ros/foxy/lib/librmw_dds_common__rosidl_typesupport_fastrtps_cpp.so -l /opt/ros/foxy/lib/librcl_interfaces__rosidl_typesupport_fastrtps_c.so -l /opt/ros/foxy/lib/librcl_interfaces__rosidl_typesupport_fastrtps_cpp.so -l /opt/ros/foxy/lib/libsensor_msgs__rosidl_typesupport_fastrtps_cpp.so </div>
</div><!-- fragment --><p>This will enable the</p>
<h1><a class="anchor" id="autotoc_md12"></a>
Additional Repo Features</h1>
<ul>
<li>devcontainer support</li>
<li>gitpod support</li>
<li>vs code setup support</li>
</ul>
<h1><a class="anchor" id="autotoc_md13"></a>
Tests</h1>
<h2><a class="anchor" id="autotoc_md14"></a>
Mocking</h2>
<p>There are 2 mocking classes which mocks the hardware interfaces, to allow for full system testing without hardware.</p>
<h2><a class="anchor" id="autotoc_md15"></a>
Unit tests</h2>
<ul>
<li>PD-Test - Test for the PD controller</li>
<li>KinovaTest - Tests the robotMath function </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
